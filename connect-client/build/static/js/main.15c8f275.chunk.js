(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,r){e.exports=r(324)},166:function(e,t,r){},170:function(e,t,r){},324:function(e,t,r){"use strict";r.r(t);var s=r(0),a=r.n(s),o=r(11),l=r.n(o),n=(r(166),r(27)),i=r(36),c=r(146),m=r(157);var u=e=>void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length;const _={isAuthenticated:!1,user:{}};const p={};var h=Object(i.c)({auth:function(e=_,t){switch(t.type){case"SET_CURRENT_USER":return Object(m.a)({},e,{isAuthenticated:!u(t.payload),user:t.payload});default:return e}},errors:function(e=p,t){switch(t.type){case"GET_ERRORS":return t.payload;case"CLEAR_ERRORS":return{};default:return e}}});const f=[c.a],d=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d;var b=Object(i.e)(h,{},d(Object(i.a)(...f))),N=(r(170),r(42)),g=r(38),E=(r(109),r(325)),y=r(326),v=r(23),w=r(75),R=r(52),j=r.n(R);var k=e=>{e?j.a.defaults.headers.common.Authorization=e:delete j.a.defaults.headers.common.Authorization},O=r(70),S=r.n(O);const T=e=>({type:"SET_CURRENT_USER",payload:e}),U=()=>e=>{localStorage.removeItem("jwtToken"),k(!1),e(T({}))},C=()=>({type:"CLEAR_ERRORS"});var D="C:\\Users\\lenovo\\Desktop\\Looback\\global\\connect-client\\src\\comopnent\\login.js";const x=E.a.create({name:"normal_login"})(class extends a.a.Component{constructor(...e){super(...e),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||console.log("Received values of form: ",t),this.props.loginUser(t,this.changeRoute)})}),this.changeRoute=(()=>{this.props.history.push("/landing-page")})}componentDidMount(){this.props.auth.isAuthenticated&&this.props.history.push("/landing-page")}componentWillReceiveProps(e){e.auth.isAuthenticated&&this.props.history.push("/landing-page"),e.errors&&this.setState({errors:e.errors})}render(){const e=this.props.form.getFieldDecorator;return a.a.createElement("div",{className:"login-comoponent",__source:{fileName:D,lineNumber:40},__self:this},a.a.createElement(E.a,{onSubmit:this.handleSubmit,className:"login-form",__source:{fileName:D,lineNumber:41},__self:this},a.a.createElement(E.a.Item,{__source:{fileName:D,lineNumber:42},__self:this},e("username",{rules:[{required:!0,message:"Please input your username!"}]})(a.a.createElement(y.a,{prefix:a.a.createElement(v.a,{type:"user",style:{color:"rgba(0,0,0,.25)"},__source:{fileName:D,lineNumber:50},__self:this}),placeholder:"Username",__source:{fileName:D,lineNumber:48},__self:this}))),a.a.createElement(E.a.Item,{__source:{fileName:D,lineNumber:56},__self:this},e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(a.a.createElement(y.a,{prefix:a.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"},__source:{fileName:D,lineNumber:64},__self:this}),type:"password",placeholder:"Password",__source:{fileName:D,lineNumber:62},__self:this}))),a.a.createElement("div",{style:{color:"red",padding:15},__source:{fileName:D,lineNumber:71},__self:this}," ",this.props.errors?this.props.errors.error?this.props.errors.error.message:u(this.props.errors)?null:"invalid password":null),a.a.createElement(E.a.Item,{__source:{fileName:D,lineNumber:81},__self:this},a.a.createElement(w.a,{type:"primary",htmlType:"submit",className:"login-form-button",__source:{fileName:D,lineNumber:82},__self:this},"Log in"),"Or ",a.a.createElement(N.b,{to:"/register",__source:{fileName:D,lineNumber:89},__self:this},"register now!"))))}});var P=Object(n.b)(e=>({errors:e.errors,auth:e.auth}),{loginUser:(e,t)=>r=>{r(C()),j.a.post("/api/login",e).then(e=>{const s=e.data.token;localStorage.setItem("jwtToken",s),k(s);const a=S()(s);r(T(a)),t(),r(C())}).catch(e=>r({type:"GET_ERRORS",payload:e.response?e.response.data:e.message}))}})(Object(g.g)(x)),A="C:\\Users\\lenovo\\Desktop\\Looback\\global\\connect-client\\src\\comopnent\\register.js";const L=E.a.create({name:"normal_login"})(class extends a.a.Component{constructor(...e){super(...e),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||console.log("Received values of form: ",t),this.props.register(t,this.changeRoute)})}),this.changeRoute=(()=>{this.props.history.push("/login")})}componentDidMount(){this.props.auth.isAuthenticated&&this.props.history.push("/landing-page")}componentWillReceiveProps(e){e.auth.isAuthenticated&&this.props.history.push("/landing-page"),e.errors&&this.setState({errors:e.errors})}render(){const e=this.props.form.getFieldDecorator;return a.a.createElement("div",{className:"login-comoponent",__source:{fileName:A,lineNumber:40},__self:this},a.a.createElement(E.a,{onSubmit:this.handleSubmit,className:"login-form",__source:{fileName:A,lineNumber:41},__self:this},a.a.createElement(E.a.Item,{__source:{fileName:A,lineNumber:42},__self:this},e("username",{rules:[{required:!0,message:"Please input your username!"}]})(a.a.createElement(y.a,{prefix:a.a.createElement(v.a,{type:"user",style:{color:"rgba(0,0,0,.25)"},__source:{fileName:A,lineNumber:50},__self:this}),placeholder:"Username",__source:{fileName:A,lineNumber:48},__self:this}))),a.a.createElement(E.a.Item,{__source:{fileName:A,lineNumber:56},__self:this},e("email",{rules:[{required:!0,message:"Please input your email!"}]})(a.a.createElement(y.a,{prefix:a.a.createElement(v.a,{type:"email",style:{color:"rgba(0,0,0,.25)"},__source:{fileName:A,lineNumber:62},__self:this}),placeholder:"email",__source:{fileName:A,lineNumber:60},__self:this}))),a.a.createElement(E.a.Item,{__source:{fileName:A,lineNumber:68},__self:this},e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(a.a.createElement(y.a,{prefix:a.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"},__source:{fileName:A,lineNumber:76},__self:this}),type:"password",placeholder:"Password",__source:{fileName:A,lineNumber:74},__self:this}))),a.a.createElement("div",{style:{color:"red",padding:15},__source:{fileName:A,lineNumber:83},__self:this}," ",this.props.errors?this.props.errors.error?this.props.errors.error.message:u(this.props.errors)?null:"invalid password":null),a.a.createElement(E.a.Item,{__source:{fileName:A,lineNumber:93},__self:this},a.a.createElement(w.a,{type:"primary",htmlType:"submit",className:"login-form-button",__source:{fileName:A,lineNumber:94},__self:this},"Log in"),"Or ",a.a.createElement(N.b,{to:"/register",__source:{fileName:A,lineNumber:101},__self:this},"register now!"))))}});var I=Object(n.b)(e=>({errors:e.errors,auth:e.auth}),{register:(e,t)=>r=>{r(C()),j.a.post("/api/user",e).then(e=>{t(),r(C())}).catch(e=>r({type:"GET_ERRORS",payload:e.response?e.response.data:e.message}))}})(Object(g.g)(L)),q=r(1),F=r.n(q),W="C:\\Users\\lenovo\\Desktop\\Looback\\global\\connect-client\\src\\comopnent\\landingPage.js";class z extends s.Component{render(){return a.a.createElement("div",{__source:{fileName:W,lineNumber:13},__self:this},a.a.createElement("header",{className:"logout-button",__source:{fileName:W,lineNumber:14},__self:this},a.a.createElement("div",{className:"logout-button",__source:{fileName:W,lineNumber:15},__self:this},"logout",a.a.createElement(w.a,{type:"primary",shape:"circle",size:35,onClick:this.props.logoutUser,__source:{fileName:W,lineNumber:17},__self:this},a.a.createElement(v.a,{type:"logout",__source:{fileName:W,lineNumber:23},__self:this})))),a.a.createElement("h1",{__source:{fileName:W,lineNumber:27},__self:this}," New Landing page"))}}z.propTypes={prop:F.a};var G=Object(n.b)(e=>({}),{logoutUser:U})(z),M=r(155),B="C:\\Users\\lenovo\\Desktop\\Looback\\global\\connect-client\\src\\utils\\privateRoute.js";const J=e=>{let t=e.component,r=e.auth,s=Object(M.a)(e,["component","auth"]);return a.a.createElement(g.b,Object.assign({},s,{render:e=>!0===r.isAuthenticated?a.a.createElement(t,Object.assign({},e,{__source:{fileName:B,lineNumber:11},__self:void 0})):a.a.createElement(g.a,{to:"/login",__source:{fileName:B,lineNumber:13},__self:void 0}),__source:{fileName:B,lineNumber:7},__self:void 0}))};J.propTypes={auth:F.a.object.isRequired};var X=Object(n.b)(e=>({auth:e.auth}))(J),V="C:\\Users\\lenovo\\Desktop\\Looback\\global\\connect-client\\src\\App.js";if(localStorage.jwtToken){k(localStorage.jwtToken);const e=S()(localStorage.jwtToken);b.dispatch(T(e));const t=Date.now()/1e3;e.exp<t&&(b.dispatch(U()),window.location.href="/")}var $=function(){return a.a.createElement(n.a,{store:b,__source:{fileName:V,lineNumber:39},__self:this},a.a.createElement(N.a,{__source:{fileName:V,lineNumber:40},__self:this},a.a.createElement(g.d,{__source:{fileName:V,lineNumber:41},__self:this},a.a.createElement(X,{exact:!0,path:"/landing-page",component:G,__source:{fileName:V,lineNumber:42},__self:this})),a.a.createElement(g.b,{exact:!0,path:"/",component:P,__source:{fileName:V,lineNumber:44},__self:this}),a.a.createElement(g.b,{exact:!0,path:"/Register",component:I,__source:{fileName:V,lineNumber:45},__self:this})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement($,{__source:{fileName:"C:\\Users\\lenovo\\Desktop\\Looback\\global\\connect-client\\src\\index.js",lineNumber:7},__self:void 0}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[159,1,2]]]);
//# sourceMappingURL=main.15c8f275.chunk.js.map